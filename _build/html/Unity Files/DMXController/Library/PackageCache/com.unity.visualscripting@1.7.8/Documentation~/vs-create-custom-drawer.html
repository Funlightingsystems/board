<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Create a custom PropertyDrawer for a custom type &#8212; Board 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/classic.css" />
    
    <script data-url_root="../../../../../../" id="documentation_options" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/sphinx_highlight.js"></script>
    
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../../../../index.html">Board 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Create a custom PropertyDrawer for a custom type</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="create-a-custom-propertydrawer-for-a-custom-type">
<h1>Create a custom PropertyDrawer for a custom type<a class="headerlink" href="#create-a-custom-propertydrawer-for-a-custom-type" title="Permalink to this heading">¶</a></h1>
<p>If you want to use a custom type from a custom class in Visual Scripting, and you don’t have access to its source code, you must create a custom PropertyDrawer.</p>
<p>You can’t assign a value to a custom type inside the Editor or initialize the value for a variable with a custom type if it doesn’t have a PropertyDrawer.</p>
<blockquote>
<div><p>[!NOTE]
The class for your custom type must have the <code class="docutils literal notranslate"><span class="pre">[Serializable]</span></code> tag in its source code to create a custom PropertyDrawer.</p>
</div></blockquote>
<p>To create a custom PropertyDrawer:</p>
<ol class="arabic simple">
<li><p>[!include<a class="reference internal" href="snippets/vs-open-project-window.html"><span class="std std-doc">open-project-window</span></a>]</p></li>
<li><p>[!include<a class="reference internal" href="snippets/vs-create-c-script-project.html"><span class="std std-doc">create-c-script-project</span></a>]</p></li>
<li><p>Enter a name, such as <code class="docutils literal notranslate"><span class="pre">CounterDrawer</span></code>, for the new script file.</p></li>
<li><p>Press Enter.</p></li>
<li><p>[!include<a class="reference internal" href="snippets/vs-open-new-external-code.html"><span class="std std-doc">open-new-external-code</span></a>]</p></li>
<li><p>Remove the <code class="docutils literal notranslate"><span class="pre">Start</span></code> and <code class="docutils literal notranslate"><span class="pre">Update</span></code> functions and their comments from the script file.</p></li>
<li><p>Above the line that defines your new <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">class</span></code>, add a <code class="docutils literal notranslate"><span class="pre">[CustomPropertyDrawer]</span></code> attribute.</p></li>
<li><p>In the parameters for the <code class="docutils literal notranslate"><span class="pre">[CustomPropertyDrawer]</span></code> attribute, specify a <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">of</span></code> parameter with the name of the type you want to assign to this PropertyDrawer, exactly as it appears in Unity.</p></li>
<li><p>Change the <code class="docutils literal notranslate"><span class="pre">MonoBehaviour</span></code> class at the end of your <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">class</span></code> definition to <code class="docutils literal notranslate"><span class="pre">PropertyDrawer</span></code>.</p></li>
</ol>
<blockquote>
<div><p>[!NOTE]
After you create a custom PropertyDrawer, you must generate the required property provider scripts from your Visual Scripting Project Settings. For more information, see <a class="reference internal" href="vs-configuration.html"><span class="std std-doc">Configure project settings</span></a>.</p>
</div></blockquote>
<p>The following is an example of a finished PropertyDrawer script:</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">UnityEditor</span><span class="p">;</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span>
<span class="w">    </span><span class="na">[CustomPropertyDrawer]</span><span class="p">(</span><span class="n">type</span><span class="w"> </span><span class="n">of</span><span class="p">(</span><span class="o">&lt;</span><span class="n">Counter</span><span class="o">&gt;</span><span class="p">))]</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">CounterDrawer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">PropertyDrawer</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Draw the property inside the given rect</span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">OnGUI</span><span class="p">(</span><span class="n">Rect</span><span class="w"> </span><span class="n">position</span><span class="p">,</span><span class="w"> </span><span class="n">SerializedProperty</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="n">GUIContent</span><span class="w"> </span><span class="n">label</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Using BeginProperty / EndProperty on the parent property means that</span>
<span class="w">            </span><span class="c1">// prefab override logic works on the entire property.</span>
<span class="w">            </span><span class="n">EditorGUI</span><span class="p">.</span><span class="n">BeginProperty</span><span class="p">(</span><span class="n">position</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="p">,</span><span class="w"> </span><span class="n">property</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">            </span><span class="c1">// Draw label</span>
<span class="w">            </span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EditorGUI</span><span class="p">.</span><span class="n">PrefixLabel</span><span class="p">(</span><span class="n">position</span><span class="p">,</span><span class="w"> </span><span class="n">GUIUtility</span><span class="p">.</span><span class="n">GetControlID</span><span class="p">(</span><span class="n">FocusType</span><span class="p">.</span><span class="n">Passive</span><span class="p">),</span><span class="w"> </span><span class="n">label</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">            </span><span class="c1">// Don&#39;t indent child fields</span>
<span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">indent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EditorGUI</span><span class="p">.</span><span class="n">indentLevel</span><span class="p">;</span>
<span class="w">            </span><span class="n">EditorGUI</span><span class="p">.</span><span class="n">indentLevel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">            </span><span class="c1">// Calculate rects</span>
<span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">amountRect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rect</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="m">30</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">.</span><span class="n">height</span><span class="p">);</span>
<span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">unitRect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rect</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">35</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">.</span><span class="n">height</span><span class="p">);</span>
<span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">nameRect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Rect</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">90</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">.</span><span class="n">width</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">90</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">.</span><span class="n">height</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">            </span><span class="c1">// Draw fields - passs GUIContent.none to each so they are drawn without labels</span>
<span class="w">            </span><span class="n">EditorGUI</span><span class="p">.</span><span class="n">PropertyField</span><span class="p">(</span><span class="n">amountRect</span><span class="p">,</span><span class="w"> </span><span class="n">property</span><span class="p">.</span><span class="n">FindPropertyRelative</span><span class="p">(</span><span class="s">&quot;amount&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">GUIContent</span><span class="p">.</span><span class="n">none</span><span class="p">);</span>
<span class="w">            </span><span class="n">EditorGUI</span><span class="p">.</span><span class="n">PropertyField</span><span class="p">(</span><span class="n">unitRect</span><span class="p">,</span><span class="w"> </span><span class="n">property</span><span class="p">.</span><span class="n">FindPropertyRelative</span><span class="p">(</span><span class="s">&quot;unit&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">GUIContent</span><span class="p">.</span><span class="n">none</span><span class="p">);</span>
<span class="w">            </span><span class="n">EditorGUI</span><span class="p">.</span><span class="n">PropertyField</span><span class="p">(</span><span class="n">nameRect</span><span class="p">,</span><span class="w"> </span><span class="n">property</span><span class="p">.</span><span class="n">FindPropertyRelative</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">GUIContent</span><span class="p">.</span><span class="n">none</span><span class="p">);</span>
<span class="w">    </span>
<span class="w">            </span><span class="c1">// Set indent back to what it was</span>
<span class="w">            </span><span class="n">EditorGUI</span><span class="p">.</span><span class="n">indentLevel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">indent</span><span class="p">;</span>
<span class="w">    </span>
<span class="w">            </span><span class="n">EditorGUI</span><span class="p">.</span><span class="n">EndProperty</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
<p>To create the rest of your custom PropertyDrawer, you must decide what fields you must display, and how you want them to display in the Editor’s interface. For example, you might want to use the UIElements module to create your PropertyDrawer, or decide to use Unity’s IMGUI module.</p>
<p>For more information on how to create and design a custom PropertyDrawer, see the <a class="reference external" href="https://docs.unity3d.com/ScriptReference/PropertyDrawer.html">PropertyDrawer class</a> in the main Unity Scripting API and its related methods.</p>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../../../_sources/Unity Files/DMXController/Library/PackageCache/com.unity.visualscripting@1.7.8/Documentation~/vs-create-custom-drawer.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../../../../index.html">Board 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Create a custom PropertyDrawer for a custom type</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, The FLS team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.1.
    </div>
  </body>
</html>