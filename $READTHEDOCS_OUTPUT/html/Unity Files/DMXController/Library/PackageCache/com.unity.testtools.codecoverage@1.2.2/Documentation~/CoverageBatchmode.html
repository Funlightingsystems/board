<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Using Code Coverage in batchmode &#8212; Board 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/classic.css" />
    
    <script data-url_root="../../../../../../" id="documentation_options" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/sphinx_highlight.js"></script>
    
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../../../../index.html">Board 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Using Code Coverage in batchmode</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="using-code-coverage-in-batchmode">
<h1>Using Code Coverage in batchmode<a class="headerlink" href="#using-code-coverage-in-batchmode" title="Permalink to this heading">¶</a></h1>
<p>You can pass the following arguments in batchmode:</p>
<p><strong>-enableCodeCoverage</strong>, to enable code coverage.<br />
<strong>-coverageResultsPath</strong> (optional), to set the location where the coverage results and report are saved to. The default location is the project’s path.<br />
<strong>-coverageHistoryPath</strong> (optional), to set the location where the coverage report history is saved to. The default location is the project’s path.<br />
<strong>-coverageOptions</strong> (optional), to pass extra options. Options are separated by semicolon. Some shells use semicolons to separate commands. Therefore, to ensure that coverage options are parsed correctly, enclose them in quotation marks.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>Coverage Option</p></th>
<th class="head text-left"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">generateHtmlReport</span></code></p></td>
<td class="text-left"><p>Add this to generate a coverage <a class="reference internal" href="HowToInterpretResults.html"><span class="std std-doc">HTML report</span></a>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">generateHtmlReportHistory</span></code></p></td>
<td class="text-left"><p>Add this to generate and include the coverage history in the HTML report.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">generateAdditionalReports</span></code></p></td>
<td class="text-left"><p>Add this to generate <a class="reference external" href="https://docs.sonarqube.org/latest/analysis/generic-test">SonarQube</a>, <a class="reference external" href="https://cobertura.github.io/cobertura">Cobertura</a> and <a class="reference external" href="https://github.com/linux-test-project/lcov">LCOV</a> reports.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">generateBadgeReport</span></code></p></td>
<td class="text-left"><p>Add this to generate coverage summary badges in SVG and PNG format.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">generateAdditionalMetrics</span></code></p></td>
<td class="text-left"><p>Add this to generate and include additional metrics in the HTML report. These currently include Cyclomatic Complexity and Crap Score calculations for each method. See the <a class="reference internal" href="HowToInterpretResults.html#risk-hotspots"><span class="std std-ref">Risk Hotspots</span></a> section for more information.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">generateTestReferences</span></code></p></td>
<td class="text-left"><p>Add this to include test references to the generated coverage results and enable the <a class="reference internal" href="HowToInterpretResults.html#coverage-by-test-methods"><span class="std std-ref">Coverage by test methods</span></a> section in the HTML report. This shows how each test contributes to the overall coverage.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">verbosity</span></code></p></td>
<td class="text-left"><p>Add this to set the verbosity level for the editor and console logs. The default value is <code class="docutils literal notranslate"><span class="pre">info</span></code>.<br/><strong>Values:</strong> <code class="docutils literal notranslate"><span class="pre">verbose</span></code>, <code class="docutils literal notranslate"><span class="pre">info</span></code>, <code class="docutils literal notranslate"><span class="pre">warning</span></code>, <code class="docutils literal notranslate"><span class="pre">error</span></code>, <code class="docutils literal notranslate"><span class="pre">off</span></code></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">useProjectSettings</span></code></p></td>
<td class="text-left"><p>Add this to use the settings specified in <code class="docutils literal notranslate"><span class="pre">ProjectSettings/Settings.json</span></code> instead. Any options passed in the command line will override this. This option can only be used in batchmode and it does not take effect when running the editor from the command line in non-batchmode.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">dontClear</span></code></p></td>
<td class="text-left"><p>Add this to allow coverage results to be accumulated after every code coverage session. If not passed the results are cleared before a new session. For more information see <a class="reference internal" href="#generate-combined-report-from-editmode-and-playmode-tests"><span class="xref myst">Generate combined report from EditMode and PlayMode tests</span></a>.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">sourcePaths</span></code></p></td>
<td class="text-left"><p>Add this to specify the source directories which contain the corresponding source code. The source directories are used by the report generator when the path information of classes cannot be determined. This is a comma separated string. Globbing is not supported.<br/><br/><strong>Example:</strong> See <a class="reference internal" href="#generate-combined-report-from-separate-projects"><span class="xref myst">Generate combined report from separate projects</span></a>.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">assemblyFilters</span></code></p></td>
<td class="text-left"><p>Add this to specify the assemblies to include or exclude in the coverage calculation and/or report. This is a comma-separated string. Prefix assemblies with <code class="docutils literal notranslate"><span class="pre">+</span></code> to include them or with <code class="docutils literal notranslate"><span class="pre">-</span></code> to exclude them. Globbing can be used to filter the assemblies.<br/><br/><strong>Available aliases:</strong><br/><br/><code class="docutils literal notranslate"><span class="pre">&lt;all&gt;</span></code> maps to all the assemblies in the project.<br/><code class="docutils literal notranslate"><span class="pre">&lt;assets&gt;</span></code> maps to the assemblies under the <code class="docutils literal notranslate"><span class="pre">Assets</span></code> folder.<br/><code class="docutils literal notranslate"><span class="pre">&lt;packages&gt;</span></code> maps to the Packages’ assemblies in the project, including the built-in packages.<br/><br/><strong>By default, if there are no included assemblies specified, only the assemblies under the <code class="docutils literal notranslate"><span class="pre">Assets</span></code> folder will be included.</strong><br/><br/><strong>Examples:</strong><br/><br/><code class="docutils literal notranslate"><span class="pre">assemblyFilters:+&lt;all&gt;</span></code> will include code from all the assemblies in the project.<br/><code class="docutils literal notranslate"><span class="pre">assemblyFilters:+my.assembly</span></code> will only include code from the assembly called <code class="docutils literal notranslate"><span class="pre">my.assembly</span></code>.<br/><code class="docutils literal notranslate"><span class="pre">assemblyFilters:+unity.*</span></code> will include code from any assembly whose name starts with <code class="docutils literal notranslate"><span class="pre">unity.</span></code><br/><code class="docutils literal notranslate"><span class="pre">assemblyFilters:-*unity*</span></code> will exclude code from all assemblies that contain the word <code class="docutils literal notranslate"><span class="pre">unity</span></code> in their names.<br/><code class="docutils literal notranslate"><span class="pre">assemblyFilters:+my.assembly.*,-my.assembly.tests</span></code> will include code from any assembly whose name starts with <code class="docutils literal notranslate"><span class="pre">my.assembly.</span></code>, but will explicitly exclude code from the assembly called <code class="docutils literal notranslate"><span class="pre">my.assembly.tests</span></code>.<br/><code class="docutils literal notranslate"><span class="pre">assemblyFilters:+my.locale.??</span></code> will only include code from assemblies whose names match this format, e.g. <code class="docutils literal notranslate"><span class="pre">my.locale.en</span></code>, <code class="docutils literal notranslate"><span class="pre">my.locale.99</span></code>, etc.<br/><code class="docutils literal notranslate"><span class="pre">assemblyFilters:+my.assembly.[a-z][0-9]</span></code> will only include code from assemblies whose names match this format, e.g. <code class="docutils literal notranslate"><span class="pre">my.assembly.a1</span></code>, <code class="docutils literal notranslate"><span class="pre">my.assembly.q7</span></code>, etc.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">pathFilters</span></code></p></td>
<td class="text-left"><p>Add this to specify the paths that should be included or excluded in the coverage calculation and/or report. This is a comma-separated string. Prefix paths with <code class="docutils literal notranslate"><span class="pre">+</span></code> to include them and with <code class="docutils literal notranslate"><span class="pre">-</span></code> to exclude them. Globbing can be used to filter the paths.<br/><br/>Both absolute and relative paths are supported. Absolute paths can be shortened using globbing e.g. <code class="docutils literal notranslate"><span class="pre">**/Assets/Scripts/</span></code>. Relative paths require the <code class="docutils literal notranslate"><span class="pre">sourcePaths</span></code> option to be set. See <a class="reference internal" href="#using-relative-paths-in-path-filters"><span class="xref myst">Using relative paths in path filters</span></a>.<br/><br/><strong>Note:</strong> If <code class="docutils literal notranslate"><span class="pre">pathFilters</span></code> are specified and there are no included assemblies specified in <code class="docutils literal notranslate"><span class="pre">assemblyFilters</span></code>, then all the assemblies in the project are included in order for <code class="docutils literal notranslate"><span class="pre">path</span> <span class="pre">filtering</span></code> to take precedence over <code class="docutils literal notranslate"><span class="pre">assembly</span> <span class="pre">filtering</span></code>.<br/><br/><br/><strong>Examples:</strong><br/><br/><code class="docutils literal notranslate"><span class="pre">pathFilters:+C:/MyProject/Assets/MyClass.cs</span></code> will only include the <code class="docutils literal notranslate"><span class="pre">MyClass.cs</span></code> file.<br/><code class="docutils literal notranslate"><span class="pre">pathFilters:+C:/MyProject/Assets/Scripts/*</span></code> will include all files in the <code class="docutils literal notranslate"><span class="pre">C:/MyProject/Assets/Scripts</span></code> folder. Files in subfolders will not be included.<br/><code class="docutils literal notranslate"><span class="pre">pathFilters:-C:/MyProject/Assets/AutoGenerated/**</span></code> will exclude all files under the <code class="docutils literal notranslate"><span class="pre">C:/MyProject/Assets/AutoGenerated</span></code> folder and any of its subfolders.<br/><code class="docutils literal notranslate"><span class="pre">pathFilters:+**/Assets/Editor/**</span></code> will include just the files that have <code class="docutils literal notranslate"><span class="pre">/Assets/Editor/</span></code> in their path.<br/><code class="docutils literal notranslate"><span class="pre">pathFilters:+C:/MyProject/Assets/**/MyClass.cs</span></code> will include any file named <code class="docutils literal notranslate"><span class="pre">MyClass.cs</span></code> that is under the <code class="docutils literal notranslate"><span class="pre">C:/MyProject/Assets</span></code> folder and any of its subfolders.<br/><code class="docutils literal notranslate"><span class="pre">pathFilters:+C:/MyProject/**,-**/Packages/**</span></code> will only include files under <code class="docutils literal notranslate"><span class="pre">C:/MyProject/</span></code> folder and exclude all files under any <code class="docutils literal notranslate"><span class="pre">Packages</span></code> folder.<br/><code class="docutils literal notranslate"><span class="pre">pathFilters:+**/MyGeneratedClass_??.cs</span></code> will include only files with filenames that match this format, i.e. <code class="docutils literal notranslate"><span class="pre">MyGeneratedClass_01.cs</span></code>, <code class="docutils literal notranslate"><span class="pre">MyGeneratedClass_AB.cs</span></code>, etc.<br/><code class="docutils literal notranslate"><span class="pre">pathFilters:+**/MyClass_[A-Z][0-9].cs</span></code> will include only files with filenames that match this format, i.e. <code class="docutils literal notranslate"><span class="pre">MyClass_A1.cs</span></code>, <code class="docutils literal notranslate"><span class="pre">MyClass_Q7.cs</span></code>, etc.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">pathFiltersFromFile</span></code></p></td>
<td class="text-left"><p>Add this to specify the file to read path filtering rules from. Instead of defining all path filtering rules directly in the command line, as you would with the <code class="docutils literal notranslate"><span class="pre">pathFilters</span></code> option, this allows you to store them in a separate file, making your commands clearer and easier to manage.<br/><br/>Like with the <code class="docutils literal notranslate"><span class="pre">pathFilters</span></code> option, <code class="docutils literal notranslate"><span class="pre">pathFiltersFromFile</span></code> also supports relative paths. See <a class="reference internal" href="#using-relative-paths-in-path-filters"><span class="xref myst">Using relative paths in path filters</span></a>.<br/><br/><strong>Examples:</strong><br/><br/><code class="docutils literal notranslate"><span class="pre">pathFiltersFromFile:C:/MyProject/FilteringRules.txt</span></code> will read rules from a file located in <code class="docutils literal notranslate"><span class="pre">C:/MyProject/FilteringRules.txt</span></code><br/><code class="docutils literal notranslate"><span class="pre">pathFilterFromFile:FilteringRules.txt</span></code> will read rules from <code class="docutils literal notranslate"><span class="pre">FilteringRules.txt</span></code> located in the root of your project.<br/><br/>Syntax of the rules is the same as with the <code class="docutils literal notranslate"><span class="pre">pathFilters</span></code> option, however, rules should be listed in separate lines in the file.<br/><br/><strong>File example:</strong><br/><br/>This will include all the files in the <code class="docutils literal notranslate"><span class="pre">Scripts</span></code> folder and exclude all the files in the <code class="docutils literal notranslate"><span class="pre">Scripts/Generated</span></code> folder<pre><code>+<strong>/Scripts/</strong><br/>-<strong>/Scripts/Generated/</strong></code></pre></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">pathReplacePatterns</span></code></p></td>
<td class="text-left"><p>Add this to replace specific sections from the paths that are stored in the coverage results xml files. This is a comma separated string and requires elements to be passed in pairs i.e. <code class="docutils literal notranslate"><span class="pre">pathReplacePatterns:from,to,from,to</span></code>. Globbing is supported.<br/><br/>You can change the file paths in the coverage results xml to relative paths so that coverage data generated on different machines can be merged into a single report. Use the <code class="docutils literal notranslate"><span class="pre">pathReplacePatterns</span></code> option in conjunction with the <code class="docutils literal notranslate"><span class="pre">sourcePaths</span></code> option to specify the source directories which contain the corresponding source code. For more information see <a class="reference internal" href="#generate-combined-report-from-separate-projects"><span class="xref myst">Generate combined report from separate projects</span></a>.<br/><br/><strong>Note:</strong> The <a class="reference external" href="https://github.com/OpenCover/opencover">OpenCover</a> results xml format specifies file paths as absolute paths (<code class="docutils literal notranslate"><span class="pre">fullPath</span></code>). Changing these paths to relative paths will invalidate the OpenCover standard format. When the results xml files are fed into other tools, these may not work as expected if the paths are relative.<br/><br/><strong>Examples:</strong><br/><br/><code class="docutils literal notranslate"><span class="pre">pathReplacePatterns:C:/MyProject,C:/MyOtherProject</span></code> will store the path as <code class="docutils literal notranslate"><span class="pre">C:/MyOtherProject/Assets/Scripts/MyScript.cs</span></code>, when the original path is <code class="docutils literal notranslate"><span class="pre">C:/MyProject/Assets/Scripts/MyScript.cs</span></code><br/><code class="docutils literal notranslate"><span class="pre">pathReplacePatterns:&#64;*,,**/PackageCache/,Packages/</span></code> will store the path as <code class="docutils literal notranslate"><span class="pre">Packages/com.unity.my.package/Editor/MyScript.cs</span></code>, when the original path is <code class="docutils literal notranslate"><span class="pre">C:/Project/Library/PackageCache/com.unity.my.package&#64;12345/Editor/MyScript.cs</span></code><br/><code class="docutils literal notranslate"><span class="pre">pathReplacePatterns:C:/MyProject/,</span></code> will store the path as <code class="docutils literal notranslate"><span class="pre">Assets/Scripts/MyScript.cs</span></code>, when the original path is <code class="docutils literal notranslate"><span class="pre">C:/MyProject/Assets/Scripts/MyScript.cs</span></code><br/><code class="docutils literal notranslate"><span class="pre">pathReplacePatterns:**Assets/,</span></code> will store the path as <code class="docutils literal notranslate"><span class="pre">Scripts/MyScript.cs</span></code>, when the original path is <code class="docutils literal notranslate"><span class="pre">C:/MyProject/Assets/Scripts/MyScript.cs</span></code><br/><code class="docutils literal notranslate"><span class="pre">pathReplacePatterns:C:/*/Assets/,</span></code> will store the path as <code class="docutils literal notranslate"><span class="pre">Scripts/MyScript.cs</span></code>, when the original path is <code class="docutils literal notranslate"><span class="pre">C:/MyProject/Assets/Scripts/MyScript.cs</span></code><br/><code class="docutils literal notranslate"><span class="pre">pathReplacePatterns:C:/MyProject??/,</span></code> will store the path as <code class="docutils literal notranslate"><span class="pre">Assets/Scripts/MyScript.cs</span></code>, when the original path is <code class="docutils literal notranslate"><span class="pre">C:/MyProject01/Assets/Scripts/MyScript.cs</span></code><br/><code class="docutils literal notranslate"><span class="pre">pathReplacePatterns:**/MyProject[A-Z][0-9]/,</span></code> will store the path as <code class="docutils literal notranslate"><span class="pre">Assets/Scripts/MyScript.cs</span></code>, when the original path is <code class="docutils literal notranslate"><span class="pre">C:/MyProjectA1/Assets/Scripts/MyScript.cs</span></code></p></td>
</tr>
</tbody>
</table>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Unity</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">projectPath</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">project</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">batchmode</span> <span class="o">-</span><span class="n">testPlatform</span> <span class="n">editmode</span> <span class="o">-</span><span class="n">runTests</span> <span class="o">-</span><span class="n">testResults</span>
<span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">results</span><span class="o">-</span><span class="n">xml</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">debugCodeOptimization</span> 
<span class="o">-</span><span class="n">enableCodeCoverage</span>
<span class="o">-</span><span class="n">coverageResultsPath</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">coverage</span><span class="o">-</span><span class="n">results</span><span class="o">&gt;</span>
<span class="o">-</span><span class="n">coverageHistoryPath</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">coverage</span><span class="o">-</span><span class="n">history</span><span class="o">&gt;</span>
<span class="o">-</span><span class="n">coverageOptions</span> <span class="s2">&quot;generateAdditionalMetrics;generateHtmlReport;generateHtmlReportHistory;generateBadgeReport;</span>
<span class="n">assemblyFilters</span><span class="p">:</span><span class="o">+</span><span class="n">my</span><span class="o">.</span><span class="n">assembly</span><span class="o">.*</span><span class="p">,</span><span class="o">+&lt;</span><span class="n">packages</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">pathFilters</span><span class="p">:</span><span class="o">-**/</span><span class="n">Tests</span><span class="o">/**</span><span class="p">,</span><span class="o">-**/</span><span class="n">BuiltInPackages</span><span class="o">/**</span><span class="p">;</span>
<span class="n">verbosity</span><span class="p">:</span><span class="n">verbose</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>The example above opens the project at <code class="docutils literal notranslate"><span class="pre">\&lt;path-to-project\&gt;</span></code>, runs the <code class="docutils literal notranslate"><span class="pre">EditMode</span></code> tests and produces an HTML coverage report and coverage summary badges in <code class="docutils literal notranslate"><span class="pre">\&lt;path-to-coverage-results\&gt;</span></code>. The report includes the coverage history, Cyclomatic Complexity and Crap Score calculations. The coverage history files are saved in <code class="docutils literal notranslate"><span class="pre">\&lt;path-to-coverage-history\&gt;</span></code>.</p>
<p>Additionally, the report includes code from any assembly whose name starts with <code class="docutils literal notranslate"><span class="pre">my.assembly.</span></code>, and includes code from all the Packages’ assemblies. It excludes files that have <code class="docutils literal notranslate"><span class="pre">/Tests/</span></code> in their path (i.e. all the files under the Tests folder) and also excludes files that have <code class="docutils literal notranslate"><span class="pre">/BuiltInPackages/</span></code> in their path (i.e. all the built-in packages).</p>
<p><strong>Note:</strong> <code class="docutils literal notranslate"><span class="pre">-debugCodeOptimization</span></code> is passed above to ensure Code optimization is set to Debug mode. See <a class="reference internal" href="UsingCodeCoverage.html#using-code-coverage-with-code-optimization"><span class="std std-ref">Using Code Coverage with Code Optimization</span></a>.</p>
</section>
<section id="generate-combined-report-from-editmode-and-playmode-tests">
<h2>Generate combined report from EditMode and PlayMode tests<a class="headerlink" href="#generate-combined-report-from-editmode-and-playmode-tests" title="Permalink to this heading">¶</a></h2>
<p>To get coverage information for both EditMode and PlayMode tests, run the editor three times as shown in the example below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Unity</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">projectPath</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">project</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">batchmode</span> <span class="o">-</span><span class="n">testPlatform</span> <span class="n">editmode</span> <span class="o">-</span><span class="n">runTests</span> <span class="o">-</span><span class="n">debugCodeOptimization</span> <span class="o">-</span><span class="n">enableCodeCoverage</span> <span class="o">-</span><span class="n">coverageResultsPath</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">coverage</span><span class="o">-</span><span class="n">results</span><span class="o">&gt;</span>
<span class="o">-</span><span class="n">coverageOptions</span> <span class="s2">&quot;generateAdditionalMetrics;assemblyFilters:+my.assembly.*;dontClear&quot;</span>

<span class="n">Unity</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">projectPath</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">project</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">batchmode</span> <span class="o">-</span><span class="n">testPlatform</span> <span class="n">playmode</span> <span class="o">-</span><span class="n">runTests</span> <span class="o">-</span><span class="n">debugCodeOptimization</span> <span class="o">-</span><span class="n">enableCodeCoverage</span> <span class="o">-</span><span class="n">coverageResultsPath</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">coverage</span><span class="o">-</span><span class="n">results</span><span class="o">&gt;</span>
<span class="o">-</span><span class="n">coverageOptions</span> <span class="s2">&quot;generateAdditionalMetrics;assemblyFilters:+my.assembly.*;dontClear&quot;</span>

<span class="n">Unity</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">projectPath</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">project</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">batchmode</span> <span class="o">-</span><span class="n">debugCodeOptimization</span> <span class="o">-</span><span class="n">enableCodeCoverage</span> <span class="o">-</span><span class="n">coverageResultsPath</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">coverage</span><span class="o">-</span><span class="n">results</span><span class="o">&gt;</span>
<span class="o">-</span><span class="n">coverageOptions</span> <span class="s2">&quot;generateHtmlReport;generateBadgeReport;assemblyFilters:+my.assembly.*&quot;</span> <span class="o">-</span><span class="n">quit</span>
</pre></div>
</div>
<p>The first generates the coverage results for the EditMode tests, the second generates the coverage results for the PlayMode tests and the third generates the coverage report and summary badges based on both coverage results.<br/><br/><strong>Note:</strong> In <a class="reference external" href="https://docs.unity3d.com/Packages/com.unity.test-framework&#64;2.0">Unity Test Framework 2.0</a> and above the coverage results from both the EditMode and PlayMode test runs are stored in the <code class="docutils literal notranslate"><span class="pre">Automated</span></code> folder. In this example, passing the <code class="docutils literal notranslate"><span class="pre">dontClear</span></code> coverage option ensures that the results from the EditMode test run are not cleared during the PlayMode test run.</p>
</section>
<section id="generate-combined-report-from-separate-projects">
<h2>Generate combined report from separate projects<a class="headerlink" href="#generate-combined-report-from-separate-projects" title="Permalink to this heading">¶</a></h2>
<p>To get a coverage report for your shared code which is used on separate projects, run the tests for each project making sure the <code class="docutils literal notranslate"><span class="pre">-coverageResultsPath</span></code> points to a separate location inside a shared root folder as shown in the example below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Unity</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">projectPath</span> <span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">MyProject</span> <span class="o">-</span><span class="n">batchmode</span> <span class="o">-</span><span class="n">testPlatform</span> <span class="n">playmode</span> <span class="o">-</span><span class="n">runTests</span> <span class="o">-</span><span class="n">debugCodeOptimization</span> <span class="o">-</span><span class="n">enableCodeCoverage</span> <span class="o">-</span><span class="n">coverageResultsPath</span> <span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">CoverageResults</span><span class="o">/</span><span class="n">MyProject</span>
<span class="o">-</span><span class="n">coverageOptions</span> <span class="s2">&quot;generateAdditionalMetrics;assemblyFilters:+my.assembly.*;pathReplacePatterns:C:/MyProject/,&quot;</span>

<span class="n">Unity</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">projectPath</span> <span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">MyOtherProject</span> <span class="o">-</span><span class="n">batchmode</span> <span class="o">-</span><span class="n">testPlatform</span> <span class="n">playmode</span> <span class="o">-</span><span class="n">runTests</span> <span class="o">-</span><span class="n">debugCodeOptimization</span> <span class="o">-</span><span class="n">enableCodeCoverage</span> <span class="o">-</span><span class="n">coverageResultsPath</span> <span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">CoverageResults</span><span class="o">/</span><span class="n">MyOtherProject</span>
<span class="o">-</span><span class="n">coverageOptions</span> <span class="s2">&quot;generateAdditionalMetrics;assemblyFilters:+my.assembly.*;pathReplacePatterns:C:/MyOtherProject/,&quot;</span>

<span class="n">Unity</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">projectPath</span> <span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">MyProject</span> <span class="o">-</span><span class="n">batchmode</span> <span class="o">-</span><span class="n">debugCodeOptimization</span> <span class="o">-</span><span class="n">enableCodeCoverage</span> <span class="o">-</span><span class="n">coverageResultsPath</span> <span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">CoverageResults</span>
<span class="o">-</span><span class="n">coverageOptions</span> <span class="s2">&quot;generateHtmlReport;generateBadgeReport;assemblyFilters:+my.assembly.*;sourcePaths:C:/MyProject&quot;</span> <span class="o">-</span><span class="n">quit</span>
</pre></div>
</div>
<p>The first run generates the coverage results for the PlayMode tests for <code class="docutils literal notranslate"><span class="pre">MyProject</span></code> and stores these in <code class="docutils literal notranslate"><span class="pre">C:/CoverageResults/MyProject</span></code>. The second run generates the coverage results for the PlayMode tests for <code class="docutils literal notranslate"><span class="pre">MyOtherProject</span></code> and stores these in <code class="docutils literal notranslate"><span class="pre">C:/CoverageResults/MyOtherProject</span></code>. The third run generates the coverage report and summary badges based on the results found under the common <code class="docutils literal notranslate"><span class="pre">C:/CoverageResults</span></code> folder.</p>
</section>
<section id="using-relative-paths-in-path-filters">
<h2>Using relative paths in path filters<a class="headerlink" href="#using-relative-paths-in-path-filters" title="Permalink to this heading">¶</a></h2>
<p>When the <code class="docutils literal notranslate"><span class="pre">sourcePaths</span></code> option is specified, the path filtering rules set by the <code class="docutils literal notranslate"><span class="pre">pathFilters</span></code> and <code class="docutils literal notranslate"><span class="pre">pathFiltersFromFile</span></code> options can be defined as relative paths.</p>
<p><strong>Example:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Unity</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">projectPath</span> <span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">MyProject</span> <span class="o">-</span><span class="n">batchmode</span> <span class="o">-</span><span class="n">testPlatform</span> <span class="n">playmode</span> <span class="o">-</span><span class="n">runTests</span> <span class="o">-</span><span class="n">debugCodeOptimization</span> <span class="o">-</span><span class="n">enableCodeCoverage</span> <span class="o">-</span><span class="n">coverageResultsPath</span> <span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">CoverageResults</span><span class="o">/</span><span class="n">MyProject</span>
<span class="o">-</span><span class="n">coverageOptions</span> <span class="s2">&quot;generateHtmlReport;generateAdditionalMetrics;assemblyFilters:+&lt;all&gt;;pathFiltersFromFile:FilteringRules.txt;sourcePaths:C:/MyProject/Assets&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">FilteringRules.txt</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+</span><span class="n">Scripts</span><span class="o">/</span><span class="n">Animation</span><span class="o">/**</span>
<span class="o">-**/</span><span class="n">Generated</span><span class="o">/**</span>
<span class="o">+</span><span class="n">C</span><span class="p">:</span><span class="o">/</span><span class="n">MyPackages</span><span class="o">/</span><span class="n">com</span><span class="o">.</span><span class="n">my</span><span class="o">.</span><span class="n">company</span><span class="o">.</span><span class="n">mypackage</span><span class="o">/**</span>
</pre></div>
</div>
<p>This example contains three rules:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">+Scripts/Animation/**</span></code> - because the <code class="docutils literal notranslate"><span class="pre">sourcePaths</span></code> option was set and this is a relative path, this rule will include all the scripts in the <code class="docutils literal notranslate"><span class="pre">C:/MyProject/Assets/Scripts/Animation</span></code> folder and its subfolders.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-**/Generated/**</span></code> - excludes all the files that have <code class="docutils literal notranslate"><span class="pre">/Generated/</span></code> in their path. This is not a relative path so the <code class="docutils literal notranslate"><span class="pre">sourcePaths</span></code> option has no effect.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">+C:/MyPackages/com.my.company.mypackage/**</span></code> - includes all the scripts located in the package outside of the project. This is an absolute path so the <code class="docutils literal notranslate"><span class="pre">sourcePaths</span></code> option has no effect.</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../../../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Using Code Coverage in batchmode</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
<li><a class="reference internal" href="#generate-combined-report-from-editmode-and-playmode-tests">Generate combined report from EditMode and PlayMode tests</a></li>
<li><a class="reference internal" href="#generate-combined-report-from-separate-projects">Generate combined report from separate projects</a></li>
<li><a class="reference internal" href="#using-relative-paths-in-path-filters">Using relative paths in path filters</a></li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../../../_sources/Unity Files/DMXController/Library/PackageCache/com.unity.testtools.codecoverage@1.2.2/Documentation~/CoverageBatchmode.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../../../../index.html">Board 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Using Code Coverage in batchmode</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, The FLS team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.1.
    </div>
  </body>
</html>