<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Quickstart - Code Coverage tutorial &#8212; Board 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/classic.css" />
    
    <script data-url_root="../../../../../../" id="documentation_options" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/sphinx_highlight.js"></script>
    
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../../../../index.html">Board 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Quickstart - Code Coverage tutorial</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="quickstart-code-coverage-tutorial">
<h1>Quickstart - Code Coverage tutorial<a class="headerlink" href="#quickstart-code-coverage-tutorial" title="Permalink to this heading">¶</a></h1>
<p>The Quickstart guide will give you an insight into what Code Coverage is and how you can identify areas of your code that need more testing, even if you haven’t written any automated tests. It takes about 30 minutes to complete.</p>
<p><img alt="Code Coverage Workshop" src="../../../../../../_images/asteroids.png" /></p>
<section id="tasks">
<h2>Tasks<a class="headerlink" href="#tasks" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#1-what-is-code-coverage-sub2-minsub"><span class="xref myst">What is Code Coverage</span></a> (2 min)</p></li>
<li><p><a class="reference internal" href="#2-install-the-code-coverage-package-sub2-minsub"><span class="xref myst">Install the Code Coverage package</span></a> (2 min)</p></li>
<li><p><a class="reference internal" href="#3-install-the-asteroids-sample-project-sub1-minsub"><span class="xref myst">Install the Asteroids sample project</span></a> (1 min)</p></li>
<li><p><a class="reference internal" href="#4-enable-code-coverage-sub1-minsub"><span class="xref myst">Enable Code Coverage</span></a> (1 min)</p></li>
<li><p><a class="reference internal" href="#5-understanding-the-game-code-shoot-function-sub4-minsub"><span class="xref myst">Understanding the game code: Shoot() function</span></a> (4 min)</p></li>
<li><p><a class="reference internal" href="#6-generate-a-coverage-report-from-playmode-tests-sub3-minsub"><span class="xref myst">Generate a Coverage report from PlayMode tests</span></a> (3 min)</p></li>
<li><p><a class="reference internal" href="#7-add-weapon-tests-to-improve-coverage-sub3-minsub"><span class="xref myst">Add Weapon tests to improve coverage</span></a> (3 min)</p></li>
<li><p><a class="reference internal" href="#8-add-a-test-for-the-lasercontroller-sub4-minsub"><span class="xref myst">Add a test for the LaserController</span></a> (4 min)</p></li>
<li><p><a class="reference internal" href="#9-clear-the-coverage-data-sub1-minsub"><span class="xref myst">Clear the coverage data</span></a> (1 min)</p></li>
<li><p><a class="reference internal" href="#10-generate-a-coverage-report-using-coverage-recording-sub4-minsub"><span class="xref myst">Generate a Coverage report using Coverage Recording</span></a> (4 min)</p></li>
</ol>
<p><strong>Note:</strong> Estimated times are shown for each task to give you a better understanding of the time required. These times are rough guidelines - it is fine to take as much or as little time as needed.</p>
</section>
<section id="what-is-code-coverage-2-min">
<h2>1. What is Code Coverage <sub>(2 min)</sub><a class="headerlink" href="#what-is-code-coverage-2-min" title="Permalink to this heading">¶</a></h2>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Code_coverage">Code Coverage</a> is a measure of how much of your code has been executed. It is normally associated with automated tests, but you can gather coverage data in Unity at any time when the Editor is running.</p>
<p>It is typically presented as a <a class="reference internal" href="HowToInterpretResults.html"><span class="std std-doc">report</span></a> that shows the percentage of the code that has been executed. For automated testing the report does not measure the quality of tests, only whether your code is executed by PlayMode and EditMode tests. It is especially useful to check that critical or high risk areas of your code are covered, because they should receive the most rigorous testing.</p>
<p>It is much easier to accidentally introduce bugs into code that is not covered by tests, because those bugs are not detected straight away by the tests and can instead cause problems later — such as after you have published your game or app.</p>
<p>Additionally, the Code Coverage package offers a <a class="reference internal" href="CoverageRecording.html"><span class="std std-doc">Coverage Recording</span></a> feature which allows capturing coverage data on demand, in case you do not have tests in your project or doing manual testing.</p>
</section>
<section id="install-the-code-coverage-package-2-min">
<h2>2. Install the Code Coverage package <sub>(2 min)</sub><a class="headerlink" href="#install-the-code-coverage-package-2-min" title="Permalink to this heading">¶</a></h2>
<p><strong>Note:</strong> Skip this task if the package is already installed.</p>
<p>Use the <a class="reference external" href="https://docs.unity3d.com/Packages/com.unity.package-manager-ui&#64;latest">Unity Package Manager</a> to find and install the <strong>Code Coverage</strong> package.</p>
<p><img alt="Install Code Coverage package" src="../../../../../../_images/install_package.png" /></p>
<p>Alternatively, use the <strong>Add (+)</strong> dropdown and select <strong>Add package from git URL…</strong> or <strong>Add package by name…</strong> and type <code class="docutils literal notranslate"><span class="pre">com.unity.testtools.codecoverage</span></code>.</p>
<p><img alt="Install Code Coverage package from URL" src="../../../../../../_images/install_package_url.png" /></p>
<p>To verify that Code Coverage has been installed correctly, open the Code Coverage window (go to <strong>Window</strong> &gt; <strong>Analysis</strong> &gt; <strong>Code Coverage</strong>). If you don’t see the <strong>Code Coverage</strong> menu item, then Code Coverage did not install correctly.</p>
</section>
<section id="install-the-asteroids-sample-project-1-min">
<h2>3. Install the Asteroids sample project <sub>(1 min)</sub><a class="headerlink" href="#install-the-asteroids-sample-project-1-min" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>In the <a class="reference external" href="https://docs.unity3d.com/Packages/com.unity.package-manager-ui&#64;latest">Unity Package Manager</a> (<strong>Window</strong> &gt; <strong>Package Manager</strong>) select the <strong>Code Coverage</strong> package, if not already selected.</p></li>
<li><p>Find the <strong>Samples</strong> section in the package details (right hand side) and select <strong>Import</strong> next to <strong>Code Coverage Tutorial</strong>.<br/><br/>
<img alt="Import Asteroids project" src="../../../../../../_images/import_sample.png" /></p></li>
</ol>
</section>
<section id="enable-code-coverage-1-min">
<h2>4. Enable Code Coverage <sub>(1 min)</sub><a class="headerlink" href="#enable-code-coverage-1-min" title="Permalink to this heading">¶</a></h2>
<p>To enable Code Coverage open the <a class="reference internal" href="CodeCoverageWindow.html"><span class="std std-doc">Code Coverage window</span></a> (go to <strong>Window</strong> &gt; <strong>Analysis</strong> &gt; <strong>Code Coverage</strong>) and select <strong>Enable Code Coverage</strong> if not already selected, to be able to generate Coverage data and reports.</p>
<p><img alt="Enable Code Coverage" src="../../../../../../_images/enable_code_coverage.png" /></p>
<p><strong>Note:</strong> Enabling Code Coverage adds some overhead to the editor and can affect the performance.</p>
</section>
<section id="understanding-the-game-code-shoot-function-4-min">
<h2>5. Understanding the game code: Shoot() function <sub>(4 min)</sub><a class="headerlink" href="#understanding-the-game-code-shoot-function-4-min" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Go to <code class="docutils literal notranslate"><span class="pre">Asteroids/Scenes</span></code> in Project View and open the <strong>Asteroids</strong> scene.<br/>
This is located in <code class="docutils literal notranslate"><span class="pre">Assets/Samples/Code</span> <span class="pre">Coverage/&lt;version&gt;/Code</span> <span class="pre">Coverage</span> <span class="pre">Tutorial</span></code>.</p></li>
<li><p>Hit <strong>Play</strong> and play the game for a minute or two.<br/>
<img alt="Enter Play mode" src="../../../../../../_images/press_play.png" />
Use the arrow keys to move and the spacebar to shoot.</p></li>
<li><p>Exit PlayMode.</p></li>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">Scripts/Controllers/SpaceshipController.cs</span></code> script.</p></li>
<li><p>Study the <strong>Shoot</strong> function.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">If</span> <span class="n">Weapon</span> <span class="ow">is</span> <span class="n">Basic</span><span class="p">,</span> <span class="n">the</span> <span class="n">Prefabs</span><span class="o">/</span><span class="n">Weapons</span><span class="o">/</span><span class="n">Projectile</span> <span class="n">prefab</span> <span class="ow">is</span> <span class="n">instantiated</span>
<span class="n">If</span> <span class="n">Weapon</span> <span class="ow">is</span> <span class="n">Laser</span><span class="p">,</span> <span class="n">the</span> <span class="n">Prefabs</span><span class="o">/</span><span class="n">Weapons</span><span class="o">/</span><span class="n">Laser</span> <span class="n">prefab</span> <span class="ow">is</span> <span class="n">instantiated</span>
</pre></div>
</div>
</section>
<section id="generate-a-coverage-report-from-playmode-tests-3-min">
<h2>6. Generate a Coverage report from PlayMode tests <sub>(3 min)</sub><a class="headerlink" href="#generate-a-coverage-report-from-playmode-tests-3-min" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Open the <a class="reference internal" href="CodeCoverageWindow.html"><span class="std std-doc">Code Coverage window</span></a> (go to <strong>Window</strong> &gt; <strong>Analysis</strong> &gt; <strong>Code Coverage</strong>).<br/><br/>
<img alt="Code Coverage Window" src="../../../../../../_images/coverage_window1.png" /></p></li>
<li><p>If you see this warning select <strong>Switch to debug mode</strong>.<br/>
<img alt="Code Optimization" src="../../../../../../_images/code_optimization.png" />
<a class="reference external" href="https://docs.unity3d.com/2020.1/Documentation/Manual/ManagedCodeDebugging.html#CodeOptimizationMode">Code Optimization</a> was introduced in Unity 2020.1; in <em>Release mode</em> the code is optimized and therefore not directly represented by the original code. Therefore, <em>Debug mode</em> is required in order to obtain accurate code coverage information.</p></li>
<li><p>Click the <strong>Included Assemblies</strong> dropdown to make sure only<br/>
<code class="docutils literal notranslate"><span class="pre">Unity.TestTools.CodeCoverage.Sample.Asteroids</span></code> and<br/>
<code class="docutils literal notranslate"><span class="pre">Unity.TestTools.CodeCoverage.Sample.Asteroids.Tests</span></code> are selected.<br/><br/>
<img alt="Included Assemblies" src="../../../../../../_images/included_assemblies.png" /></p></li>
<li><p>Make sure <strong>HTML Report</strong>, <strong>Report History</strong>, <strong>Auto Generate Report</strong> and <strong>Auto Open Report</strong> are all checked.
<img alt="Auto Generate Report" src="../../../../../../_images/auto_generate_report.png" /></p></li>
<li><p>Switch to the <a class="reference external" href="https://docs.unity3d.com/Packages/com.unity.test-framework&#64;latest/index.html?subfolder=/manual/workflow-run-test.html">Test Runner</a> window, select the <strong>PlayMode</strong> tab and hit <strong>Run All</strong> tests.<br/><br/>
<img alt="Run PlayMode tests" src="../../../../../../_images/test_runner1.png" /></p></li>
<li><p>When the tests finish running, a file viewer window will open up containing the coverage report. Select <code class="docutils literal notranslate"><span class="pre">index.htm</span></code>.</p></li>
<li><p>Look for the classes with low coverage, especially <strong>LaserController</strong>, <strong>BaseProjectile</strong> and <strong>ProjectileController</strong>.</p></li>
</ol>
<p>You can sort the results by <em>Line coverage</em>.</p>
<p><img alt="Code Coverage Report" src="../../../../../../_images/report_tests.png" /></p>
<p>See also <a class="reference internal" href="HowToInterpretResults.html"><span class="std std-doc">How to interpret the results</span></a>.</p>
</section>
<section id="add-weapon-tests-to-improve-coverage-3-min">
<h2>7. Add Weapon tests to improve coverage <sub>(3 min)</sub><a class="headerlink" href="#add-weapon-tests-to-improve-coverage-3-min" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">Tests/WeaponTests.cs</span></code> script.</p></li>
<li><p>Uncomment all the tests (from <em>line 35</em> down to <em>line 237</em>).</p></li>
<li><p>Back in the <strong>Test Runner</strong>, hit <strong>Run All</strong> tests again.</p></li>
<li><p>When the tests finish running, a file viewer window will open up containing the coverage report. Select <code class="docutils literal notranslate"><span class="pre">index.htm</span></code>.</p></li>
<li><p>Notice that now <strong>BaseProjectile</strong> and <strong>ProjectileController</strong> coverage is considerably higher, but <strong>LaserController</strong> has not improved much.</p></li>
</ol>
<p><img alt="Code Coverage Report" src="../../../../../../_images/report_tests_after.png" /></p>
</section>
<section id="add-a-test-for-the-lasercontroller-4-min">
<h2>8. Add a test for the LaserController <sub>(4 min)</sub><a class="headerlink" href="#add-a-test-for-the-lasercontroller-4-min" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">Tests/WeaponTests.cs</span></code> script.</p></li>
<li><p>Go to the <strong>_18_LaserFiresSuccessfully</strong> test in line 225.</p></li>
<li><p>Uncomment and study the code.</p></li>
<li><p>Back in the <strong>Test Runner</strong>, hit <strong>Run All</strong> tests again.</p></li>
<li><p>When the tests finish running, a file viewer window will open up containing the coverage report. Select <code class="docutils literal notranslate"><span class="pre">index.htm</span></code>.</p></li>
<li><p>Notice how the coverage for <strong>LaserController</strong> has improved.<br/>
<img alt="LaserController Coverage" src="../../../../../../_images/report_laser_controller.png" /></p></li>
<li><p>Select the <strong>LaserController</strong> class to enter the class view and notice that about 2/3 (65%) of the code is now covered (green).</p></li>
</ol>
<p><img alt="LaserController Class Coverage" src="../../../../../../_images/report_laser_controller_class.png" /></p>
<p>Complete the <a class="reference internal" href="#11-bonus-task-sub5-8-minsub"><span class="xref myst">Bonus Task</span></a> at the end of the tutorial to get 100% coverage!</p>
</section>
<section id="clear-the-coverage-data-1-min">
<h2>9. Clear the coverage data <sub>(1 min)</sub><a class="headerlink" href="#clear-the-coverage-data-1-min" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Open the <a class="reference internal" href="CodeCoverageWindow.html"><span class="std std-doc">Code Coverage window</span></a> (go to <strong>Window</strong> &gt; <strong>Analysis</strong> &gt; <strong>Code Coverage</strong>).</p></li>
<li><p>Select <strong>Clear Results</strong> and confirm.</p></li>
<li><p>Select <strong>Clear History</strong> and confirm.</p></li>
</ol>
</section>
<section id="generate-a-coverage-report-using-coverage-recording-4-min">
<h2>10. Generate a Coverage report using Coverage Recording <sub>(4 min)</sub><a class="headerlink" href="#generate-a-coverage-report-using-coverage-recording-4-min" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Go to <code class="docutils literal notranslate"><span class="pre">Asteroids/Scenes</span></code> in Project View and open the <strong>Asteroids</strong> scene, if not opened already.</p></li>
<li><p>Open the <a class="reference internal" href="CodeCoverageWindow.html"><span class="std std-doc">Code Coverage window</span></a>. Make sure <strong>HTML Report</strong>, <strong>Report History</strong>, <strong>Auto Generate Report</strong> and <strong>Auto Open Report</strong> all are checked.<br/>
<img alt="Auto Generate Report" src="../../../../../../_images/auto_generate_report.png" /></p></li>
<li><p>Select <strong>Start Recording</strong>.<br/>
<img alt="Start Recording" src="../../../../../../_images/start_recording.png" /></p></li>
<li><p>Hit <strong>Play</strong> to play the game and <strong>exit</strong> PlayMode before you get <strong>8000</strong> points.
<img alt="Enter Play mode" src="../../../../../../_images/press_play.png" /></p></li>
<li><p>Select <strong>Stop Recording</strong>.<br/>
<img alt="Stop Recording" src="../../../../../../_images/stop_recording.png" /></p></li>
<li><p>A file viewer window will open up containing the coverage report. Select <code class="docutils literal notranslate"><span class="pre">index.htm</span></code>.</p></li>
<li><p>Notice that <strong>LaserController</strong> has 0% coverage.<br/>
<img alt="LaserController Coverage" src="../../../../../../_images/report_laser_controller_recording.png" /></p></li>
<li><p>Go back to the <strong>Code Coverage window</strong>.</p></li>
<li><p>Select <strong>Start Recording</strong>.</p></li>
<li><p>Now hit <strong>Play</strong> to play the game again but this time <strong>exit</strong> PlayMode when you get <strong>8000</strong> points.</p></li>
<li><p>Select <strong>Stop Recording</strong>.</p></li>
<li><p>Notice that <strong>LaserController</strong> coverage is now 100%.<br/>
<img alt="LaserController Coverage" src="../../../../../../_images/report_laser_controller_recording_after.png" /></p></li>
</ol>
<p>See also <a class="reference internal" href="HowToInterpretResults.html"><span class="std std-doc">How to interpret the results</span></a>.
<br/><br/></p>
</section>
<section id="bonus-task-5-8-min">
<h2>11. Bonus task <sub>(5-8 min)</sub><a class="headerlink" href="#bonus-task-5-8-min" title="Permalink to this heading">¶</a></h2>
<p>Write a new test that checks that the laser gets destroyed after 2 seconds, which will also cover the rest of the code in <strong>LaserController</strong>.</p>
<p><strong>Suggested name:</strong> _19_LaserFiresAndIsDestroyedAfterTwoSeconds.<br />
<strong>Hint:</strong> You can use <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">return</span> <span class="pre">new</span> <span class="pre">WaitForSeconds(2f);</span></code> to wait for 2 seconds.</p>
<br/>
<hr class="docutils" />
<br/>
<section id="well-done-for-finishing-the-code-coverage-tutorial">
<h3>Well done for finishing the Code Coverage tutorial!<a class="headerlink" href="#well-done-for-finishing-the-code-coverage-tutorial" title="Permalink to this heading">¶</a></h3>
<p>For questions and feedback please visit the <a class="reference external" href="https://forum.unity.com/forums/testing-automation.211/">Testing &amp; Automation</a> forum section to browse current conversations or start a new thread. Please use the <strong>code coverage</strong> tag.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../../../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Quickstart - Code Coverage tutorial</a><ul>
<li><a class="reference internal" href="#tasks">Tasks</a></li>
<li><a class="reference internal" href="#what-is-code-coverage-2-min">1. What is Code Coverage <sub>(2 min)</sub></a></li>
<li><a class="reference internal" href="#install-the-code-coverage-package-2-min">2. Install the Code Coverage package <sub>(2 min)</sub></a></li>
<li><a class="reference internal" href="#install-the-asteroids-sample-project-1-min">3. Install the Asteroids sample project <sub>(1 min)</sub></a></li>
<li><a class="reference internal" href="#enable-code-coverage-1-min">4. Enable Code Coverage <sub>(1 min)</sub></a></li>
<li><a class="reference internal" href="#understanding-the-game-code-shoot-function-4-min">5. Understanding the game code: Shoot() function <sub>(4 min)</sub></a></li>
<li><a class="reference internal" href="#generate-a-coverage-report-from-playmode-tests-3-min">6. Generate a Coverage report from PlayMode tests <sub>(3 min)</sub></a></li>
<li><a class="reference internal" href="#add-weapon-tests-to-improve-coverage-3-min">7. Add Weapon tests to improve coverage <sub>(3 min)</sub></a></li>
<li><a class="reference internal" href="#add-a-test-for-the-lasercontroller-4-min">8. Add a test for the LaserController <sub>(4 min)</sub></a></li>
<li><a class="reference internal" href="#clear-the-coverage-data-1-min">9. Clear the coverage data <sub>(1 min)</sub></a></li>
<li><a class="reference internal" href="#generate-a-coverage-report-using-coverage-recording-4-min">10. Generate a Coverage report using Coverage Recording <sub>(4 min)</sub></a></li>
<li><a class="reference internal" href="#bonus-task-5-8-min">11. Bonus task <sub>(5-8 min)</sub></a><ul>
<li><a class="reference internal" href="#well-done-for-finishing-the-code-coverage-tutorial">Well done for finishing the Code Coverage tutorial!</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../../../_sources/Unity Files/DMXController/Library/PackageCache/com.unity.testtools.codecoverage@1.2.2/Documentation~/Quickstart.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../../../../index.html">Board 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Quickstart - Code Coverage tutorial</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, The FLS team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.1.
    </div>
  </body>
</html>