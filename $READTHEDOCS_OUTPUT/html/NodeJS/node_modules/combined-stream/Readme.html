<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>combined-stream &#8212; Board 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/classic.css" />
    
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Board 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">combined-stream</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="combined-stream">
<h1>combined-stream<a class="headerlink" href="#combined-stream" title="Permalink to this heading">¶</a></h1>
<p>A stream that emits multiple other streams one after another.</p>
<p><strong>NB</strong> Currently <code class="docutils literal notranslate"><span class="pre">combined-stream</span></code> works with streams version 1 only. There is ongoing effort to switch this library to streams version 2. Any help is welcome. :) Meanwhile you can explore other libraries that provide streams2 support with more or less compatibility with <code class="docutils literal notranslate"><span class="pre">combined-stream</span></code>.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.npmjs.com/package/combined-stream2">combined-stream2</a>: A drop-in streams2-compatible replacement for the combined-stream module.</p></li>
<li><p><a class="reference external" href="https://www.npmjs.com/package/multistream">multistream</a>: A stream that emits multiple other streams one after another.</p></li>
</ul>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>npm<span class="w"> </span>install<span class="w"> </span>combined-stream
</pre></div>
</div>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<p>Here is a simple example that shows how you can use combined-stream to combine
two files into one:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">CombinedStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;combined-stream&#39;</span><span class="p">);</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">combinedStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">CombinedStream</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;file1.txt&#39;</span><span class="p">));</span>
<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;file2.txt&#39;</span><span class="p">));</span>

<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="s1">&#39;combined.txt&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>While the example above works great, it will pause all source streams until
they are needed. If you don’t want that to happen, you can set <code class="docutils literal notranslate"><span class="pre">pauseStreams</span></code>
to <code class="docutils literal notranslate"><span class="pre">false</span></code>:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">CombinedStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;combined-stream&#39;</span><span class="p">);</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">combinedStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">CombinedStream</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span><span class="nx">pauseStreams</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">});</span>
<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;file1.txt&#39;</span><span class="p">));</span>
<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;file2.txt&#39;</span><span class="p">));</span>

<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="s1">&#39;combined.txt&#39;</span><span class="p">));</span>
</pre></div>
</div>
<p>However, what if you don’t have all the source streams yet, or you don’t want
to allocate the resources (file descriptors, memory, etc.) for them right away?
Well, in that case you can simply provide a callback that supplies the stream
by calling a <code class="docutils literal notranslate"><span class="pre">next()</span></code> function:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span><span class="w"> </span><span class="nx">CombinedStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;combined-stream&#39;</span><span class="p">);</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">);</span>

<span class="kd">var</span><span class="w"> </span><span class="nx">combinedStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">CombinedStream</span><span class="p">.</span><span class="nx">create</span><span class="p">();</span>
<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">next</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;file1.txt&#39;</span><span class="p">));</span>
<span class="p">});</span>
<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">next</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">&#39;file2.txt&#39;</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">combinedStream</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">createWriteStream</span><span class="p">(</span><span class="s1">&#39;combined.txt&#39;</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this heading">¶</a></h2>
<section id="combinedstream-create-options">
<h3>CombinedStream.create([options])<a class="headerlink" href="#combinedstream-create-options" title="Permalink to this heading">¶</a></h3>
<p>Returns a new combined stream object. Available options are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">maxDataSize</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pauseStreams</span></code></p></li>
</ul>
<p>The effect of those options is described below.</p>
</section>
<section id="combinedstream-pausestreams-true">
<h3>combinedStream.pauseStreams = <code class="docutils literal notranslate"><span class="pre">true</span></code><a class="headerlink" href="#combinedstream-pausestreams-true" title="Permalink to this heading">¶</a></h3>
<p>Whether to apply back pressure to the underlaying streams. If set to <code class="docutils literal notranslate"><span class="pre">false</span></code>,
the underlaying streams will never be paused. If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the
underlaying streams will be paused right after being appended, as well as when
<code class="docutils literal notranslate"><span class="pre">delayedStream.pipe()</span></code> wants to throttle.</p>
</section>
<section id="combinedstream-maxdatasize-2-1024-1024">
<h3>combinedStream.maxDataSize = <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">1024</span> <span class="pre">*</span> <span class="pre">1024</span></code><a class="headerlink" href="#combinedstream-maxdatasize-2-1024-1024" title="Permalink to this heading">¶</a></h3>
<p>The maximum amount of bytes (or characters) to buffer for all source streams.
If this value is exceeded, <code class="docutils literal notranslate"><span class="pre">combinedStream</span></code> emits an <code class="docutils literal notranslate"><span class="pre">'error'</span></code> event.</p>
</section>
<section id="combinedstream-datasize-0">
<h3>combinedStream.dataSize = <code class="docutils literal notranslate"><span class="pre">0</span></code><a class="headerlink" href="#combinedstream-datasize-0" title="Permalink to this heading">¶</a></h3>
<p>The amount of bytes (or characters) currently buffered by <code class="docutils literal notranslate"><span class="pre">combinedStream</span></code>.</p>
</section>
<section id="combinedstream-append-stream">
<h3>combinedStream.append(stream)<a class="headerlink" href="#combinedstream-append-stream" title="Permalink to this heading">¶</a></h3>
<p>Appends the given <code class="docutils literal notranslate"><span class="pre">stream</span></code> to the combinedStream object. If <code class="docutils literal notranslate"><span class="pre">pauseStreams</span></code> is
set to `true, this stream will also be paused right away.</p>
<p><code class="docutils literal notranslate"><span class="pre">streams</span></code> can also be a function that takes one parameter called <code class="docutils literal notranslate"><span class="pre">next</span></code>. <code class="docutils literal notranslate"><span class="pre">next</span></code>
is a function that must be invoked in order to provide the <code class="docutils literal notranslate"><span class="pre">next</span></code> stream, see
example above.</p>
<p>Regardless of how the <code class="docutils literal notranslate"><span class="pre">stream</span></code> is appended, combined-stream always attaches an
<code class="docutils literal notranslate"><span class="pre">'error'</span></code> listener to it, so you don’t have to do that manually.</p>
<p>Special case: <code class="docutils literal notranslate"><span class="pre">stream</span></code> can also be a String or Buffer.</p>
</section>
<section id="combinedstream-write-data">
<h3>combinedStream.write(data)<a class="headerlink" href="#combinedstream-write-data" title="Permalink to this heading">¶</a></h3>
<p>You should not call this, <code class="docutils literal notranslate"><span class="pre">combinedStream</span></code> takes care of piping the appended
streams into itself for you.</p>
</section>
<section id="combinedstream-resume">
<h3>combinedStream.resume()<a class="headerlink" href="#combinedstream-resume" title="Permalink to this heading">¶</a></h3>
<p>Causes <code class="docutils literal notranslate"><span class="pre">combinedStream</span></code> to start drain the streams it manages. The function is
idempotent, and also emits a <code class="docutils literal notranslate"><span class="pre">'resume'</span></code> event each time which usually goes to
the stream that is currently being drained.</p>
</section>
<section id="combinedstream-pause">
<h3>combinedStream.pause();<a class="headerlink" href="#combinedstream-pause" title="Permalink to this heading">¶</a></h3>
<p>If <code class="docutils literal notranslate"><span class="pre">combinedStream.pauseStreams</span></code> is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, this does nothing.
Otherwise a <code class="docutils literal notranslate"><span class="pre">'pause'</span></code> event is emitted, this goes to the stream that is
currently being drained, so you can use it to apply back pressure.</p>
</section>
<section id="combinedstream-end">
<h3>combinedStream.end();<a class="headerlink" href="#combinedstream-end" title="Permalink to this heading">¶</a></h3>
<p>Sets <code class="docutils literal notranslate"><span class="pre">combinedStream.writable</span></code> to false, emits an <code class="docutils literal notranslate"><span class="pre">'end'</span></code> event, and removes
all streams from the queue.</p>
</section>
<section id="combinedstream-destroy">
<h3>combinedStream.destroy();<a class="headerlink" href="#combinedstream-destroy" title="Permalink to this heading">¶</a></h3>
<p>Same as <code class="docutils literal notranslate"><span class="pre">combinedStream.end()</span></code>, except it emits a <code class="docutils literal notranslate"><span class="pre">'close'</span></code> event instead of
<code class="docutils literal notranslate"><span class="pre">'end'</span></code>.</p>
</section>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this heading">¶</a></h2>
<p>combined-stream is licensed under the MIT license.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">combined-stream</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#api">API</a><ul>
<li><a class="reference internal" href="#combinedstream-create-options">CombinedStream.create([options])</a></li>
<li><a class="reference internal" href="#combinedstream-pausestreams-true">combinedStream.pauseStreams = <code class="docutils literal notranslate"><span class="pre">true</span></code></a></li>
<li><a class="reference internal" href="#combinedstream-maxdatasize-2-1024-1024">combinedStream.maxDataSize = <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">1024</span> <span class="pre">*</span> <span class="pre">1024</span></code></a></li>
<li><a class="reference internal" href="#combinedstream-datasize-0">combinedStream.dataSize = <code class="docutils literal notranslate"><span class="pre">0</span></code></a></li>
<li><a class="reference internal" href="#combinedstream-append-stream">combinedStream.append(stream)</a></li>
<li><a class="reference internal" href="#combinedstream-write-data">combinedStream.write(data)</a></li>
<li><a class="reference internal" href="#combinedstream-resume">combinedStream.resume()</a></li>
<li><a class="reference internal" href="#combinedstream-pause">combinedStream.pause();</a></li>
<li><a class="reference internal" href="#combinedstream-end">combinedStream.end();</a></li>
<li><a class="reference internal" href="#combinedstream-destroy">combinedStream.destroy();</a></li>
</ul>
</li>
<li><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/NodeJS/node_modules/combined-stream/Readme.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">Board 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">combined-stream</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, The FLS team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.1.
    </div>
  </body>
</html>